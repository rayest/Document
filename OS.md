# 概述

## 基本特性

### 并发性

* 并发：多个事件在同一时间间隔内发生
  * 多道程序环境下，一段时间内宏观上多个程序同时运行
* 并行：多个事件在同一时刻发生
  * 单处理机系统中，每一时刻却仅能有一道程序执行，故微观上这些程序只能是分时地交替执行
* 进程：为了使多个程序能并发执行
  * 在系统中能独立运行并作为资源分配的基本单位，它是由一组机器指令、数据和堆栈等组成的，是一个能独立运行的活动实体。
  * 多个进程之间可以并发执行和交换信息。一个进程在运行时需要一定的资源，如 CPU、存储空间及 I/O 设备等
* 线程：进程拥有自己的资源，调度付出的开销较大
  * 一个进程中包含若干个线程，可以利用进程所拥有的资源
  * 在引入线程的 OS 中，把进程作为分配资源的基本单位
  * 把线程作为独立运行和独立调度的基本单位
  * 由于线程比进程更小，基本上不拥有系统资源，故对它的调度所付出的开销就会小

### 共享性

* 系统中的资源可供内存中多个并发执行的进程(线程)共同使用

### 虚拟技术

* 把一个物理实体变为若干个逻辑上的对应物。物理实体(前者)是实的，即实际存在的，而后者是虚的，仅是用户感觉上的东西
* 时分复用技术
  * 分时使用方式：虚拟处理机技术（为每道程序建立一个进程，让多道程序并发地执行，以此来分时使用一台处理机）、虚拟设备技术（一台物理 I/O 设备虚拟为多台逻辑上的 I/O 设备，并允许每个用户占用一台逻辑上的 I/O 设备）
* 空分复用技术
  * 虚拟磁盘技术、虚拟存储器技术

### 异步性

## 主要功能

### 管理处理机

* 创建和撤销进程或者线程、协调各个进程或线程、实现进程或线程通信、为处理机分配进程或线程

### 管理存储器

* 内存分配与回收：为每道程序分配内存空间，并回收不再需要的内存
* 内存保护：确保每道用户程序都只在自己的内存空间内运行，彼此互不干扰
* 地址映射、内存扩充等

### 管理设备

* 缓冲管理：在内存中设置了缓冲区，改善IO性能
* 设备分配：根据 IO 请求、系统资源等为之分配设备
* 设备处理：......
* 虚拟设备

### 管理文件

* 对用户文件和系统文件进行管理：对文件存储空间、目录、读写、共享与保护的管理

# 进程管理

## 基本概念

### 结构

* PCB：进程控制块。程序段、相关的数据段、PCB 构成了进程实体

### 基本的 3 种状态

* 就绪：当进程分配到除 CPU 以外的所有必要资源后，只要再获得 CPU，便可立即执行。多个就绪的进程被排成一个就绪队列
* 执行：进程已获得 CPU，其程序正在执行
* 阻塞：由于发生某事件而暂时无法继续执行时，便放弃处理机而处于暂停状态。多个阻塞的进程被排成一个阻塞队列

### 挂起状态

* 终端用户的请求、父进程请求、负荷调节的需要、操作系统的需要

### 创建状态和终止状态

* 创建状态
  * 创建：为新进程创建 PCB，并填写必要的管理信息。将把其转入就绪状态并放到就绪队列中
  * 创建时主存资源尚未分配，创建工作还未完成，即为创建状态
  * 处于创建状态的进程，获得了必需的资源，以及对其PCB初始化工作完成后，转入就绪状态
* 终止状态
  * 首先等待操作系统进行善后处理，然后将其 PCB 清零，并将 PCB 空间返还系统
  * 到了自然结束点或者出现了无法克服的错误，而被终结
  * 进入终止态的进程以后不能再执行，但在操作系统中依然保留一个记录，其中保存状态码和一些计时统计数据，供其它进程收集。一旦其它进程完成了对终止状态进程的信息提取之后，操作系统将删除该进程。

### PCB 进程控制块

* 作用
  * 是操作系统中进程的记录型数据结构
  * 记录了用于描述进程的当前情况以及控制进程运行的全部信息。
  * 使一个在多道程序环境下不能独立运行的程序(含数据)，成为一个能独立运行的基本单位，一个能与其它进程并发执行的进程。
  * OS 是根据 PCB 来对并发执行的进程进行控制和管理的
* PCB 中的信息
  * 进程标识符：唯一标识一个进程
  * 处理机状态信息：处理机的各种寄存器中的内容
  * 进程调度信息：进程优先级、进程状态、事件（阻塞原因等）、其他（已执行时间、等待CPU时间等）
  * 进程控制信息：程序和数据的地址、进程同步和通信机制（消息队列和信号量）、资源清单、链接指针（该进程在队列中指向下一个进程的PCB的首地址）
  * PCB 的组织方式：一个操作系统中多个 PCB 可以通过链接方式和索引方式

## 进程控制

>